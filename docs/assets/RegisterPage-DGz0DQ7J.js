import{r as D,a as F,j as r,s as C,L as I}from"./index-DiLS-UB1.js";import{b as f,v as w,a as h,c as _,u as R,I as c,B as V,H as k}from"./Input-CgnUhAKa.js";const x={isValid:{name:!0,email:!0,password:!0,confirmedPassword:!0},values:{name:"",email:"",password:"",confirmedPassword:""},errors:{name:null,email:null,password:null,confirmedPassword:null},isLoading:!1};function N(e,a){switch(a.type){case"CLEAR":return x;case"UPDATE_FIELD":{const{name:s,value:o}=a.payload;return{...e,values:{...e.values,[s]:o}}}case"VALIDATE_FIELD":{const s=a.payload.name,o=e.values[s],n={name:_,email:h,password:w,confirmedPassword:()=>f(e.values.password,e.values.confirmedPassword)}[s],l=n?n(o):null;return l?{...e,isValid:{...e.isValid,[s]:!1},errors:{...e.errors,[s]:l}}:{...e,isValid:{...e.isValid,[s]:!0},errors:{...e.errors,[s]:null}}}default:return e}}const v={"register-form":"_register-form_kois9_1","inputs-wrapper":"_inputs-wrapper_kois9_7"};function T(){const[e,a]=D.useReducer(N,x),[s,{isLoading:o}]=F(),p=R(),n=t=>{const d=t.target.name,m=t.target.value;a({type:"UPDATE_FIELD",payload:{name:d,value:m}}),a({type:"VALIDATE_FIELD",payload:{name:d}})},l=async t=>{t.preventDefault();const{name:d,email:m,password:g,confirmedPassword:E}=e.values,j=_(d),y=h(m),P=w(g),L=f(g,E),A=["name","email","password","confirmedPassword"];for(const i of A)a({type:"VALIDATE_FIELD",payload:{name:i}});if(!(j||y||P||L))try{const i=await s(e.values).unwrap();p(C({...i,isAuth:!0}))}catch(i){console.log(i)}finally{a({type:"CLEAR"})}};return r.jsxs("form",{className:v["register-form"],onSubmit:l,children:[r.jsxs("div",{className:v["inputs-wrapper"],children:[r.jsx(c,{name:"name",placeholder:"Введите ваше имя",value:e.values.name,onChange:n,error:e.errors.name}),r.jsx(c,{name:"email",placeholder:"Введите ваш e-mail",value:e.values.email,onChange:n,error:e.errors.email}),r.jsx(c,{name:"password",type:"password",placeholder:"Введите пароль",value:e.values.password,onChange:n,error:e.errors.password}),r.jsx(c,{name:"confirmedPassword",type:"password",placeholder:"Подтвердите пароль",value:e.values.confirmedPassword,onChange:n,error:e.errors.confirmedPassword})]}),r.jsx(V,{disabled:o,children:"Зарегистрироваться"})]})}const b="_links_h9373_15",u={"register-page":"_register-page_h9373_1","register-page-inner":"_register-page-inner_h9373_8",links:b};function S(){return r.jsx("div",{className:"container",children:r.jsx("div",{className:u["register-page"],children:r.jsxs("div",{className:u["register-page-inner"],children:[r.jsx(k,{level:"1",children:"Регистрация"}),r.jsx(T,{}),r.jsxs("div",{className:u.links,children:[r.jsx("p",{children:"Уже есть учётная запись?"}),r.jsx(I,{to:"/login",children:"Войти"})]})]})})})}const H=S;export{H as Component};
