import{r as L,u as x,j as e,s as E,L as j}from"./index-DiLS-UB1.js";import{v,a as f,u as A,I as m,B as D,H as F}from"./Input-CgnUhAKa.js";const h={isValid:{email:!0,password:!0},values:{email:"",password:""},errors:{email:null,password:null},isLoading:!1};function I(s,r){switch(r.type){case"CLEAR":return h;case"UPDATE_FIELD":{const{name:a,value:n}=r.payload;return{...s,values:{...s.values,[a]:n}}}case"VALIDATE_FIELD":{const a=r.payload.name,n=s.values[a],o={email:f,password:v}[a],i=o?o(n):null;return i?{...s,isValid:{...s.isValid,[a]:!1},errors:{...s.errors,[a]:i}}:{...s,isValid:{...s.isValid,[a]:!0},errors:{...s.errors,[a]:null}}}default:return s}}const g={"login-form":"_login-form_3n1md_1","inputs-wrapper":"_inputs-wrapper_3n1md_7"};function k(){const[s,r]=L.useReducer(I,h),[a,{isLoading:n}]=x(),u=A(),o=t=>{const d=t.target.name,c=t.target.value;r({type:"UPDATE_FIELD",payload:{name:d,value:c}}),r({type:"VALIDATE_FIELD",payload:{name:d}})},i=async t=>{t.preventDefault();const{email:d,password:c}=s.values,_=f(d),y=v(c),w=["email","password"];for(const l of w)r({type:"VALIDATE_FIELD",payload:{name:l}});if(!(_||y))try{const l=await a(s.values).unwrap();u(E({...l,isAuth:!0}))}catch(l){console.log(l)}finally{r({type:"CLEAR"})}};return e.jsxs("form",{className:g["login-form"],onSubmit:i,children:[e.jsxs("div",{className:g["inputs-wrapper"],children:[e.jsx(m,{name:"email",placeholder:"Введите ваш e-mail",value:s.values.email,onChange:o,error:s.errors.email}),e.jsx(m,{name:"password",type:"password",placeholder:"Введите ваш пароль",value:s.values.password,onChange:o,error:s.errors.password})]}),e.jsx(D,{disabled:n,children:"Войти"})]})}const V="_links_1fkny_15",p={"login-page":"_login-page_1fkny_1","login-page-inner":"_login-page-inner_1fkny_8",links:V};function C(){return e.jsx("div",{className:"container",children:e.jsx("div",{className:p["login-page"],children:e.jsxs("div",{className:p["login-page-inner"],children:[e.jsx(F,{level:"1",children:"Вход"}),e.jsx(k,{}),e.jsxs("div",{className:p.links,children:[e.jsx("p",{children:"Нет учётной записи?"}),e.jsx(j,{to:"/register",children:"Зарегистрироваться"})]})]})})})}const T=C;export{T as Component};
